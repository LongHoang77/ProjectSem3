"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1519],{2465:function(e,a,t){var i=t(85893),r=t(85463),n=t.n(r),l=t(55855),s=t(20466),c=t(23855),d=t(67294),o=t(44040),m=t(30719),h=t(12396),g=t(48583);let DayConvert=e=>{let{day:a,date:t}=e,i=new Date,r=new Date(t);return r.setHours(0,0,0,0)==i.setHours(0,0,0,0)?"H\xf4m nay":0==a?"Chủ nhật":6==a?"Thứ 7":"Thứ ".concat(a+1)};a.Z=e=>{let{data:a,onSelect:t,filmId:r,rapID:x}=e,[N,u]=(0,g.KO)(h.P),{inTheaters:Z}=N,[b,p]=(0,d.useState)(null),[f,v]=(0,d.useState)(null),[j,w]=(0,d.useState)(0);(0,d.useEffect)(()=>{let e=a.map((e,a)=>({id:a,date:(0,l.default)((0,c.default)(e)),day:(0,s.default)((0,c.default)(e)),original:e.split(" ")[0]}));p(e)},[a]),(0,d.useEffect)(()=>{let e=a.indexOf(Z);return e>=0&&(u(t=>({...t,showDay:a[e]||0})),w(e)),function(){w(0),u(e=>({...e,showDay:null}))}},[r,Z]),(0,d.useEffect)(()=>{null!=f&&(null==f||f.slideTo(j-2))},[j]),(0,d.useEffect)(()=>function(){w(0),u(e=>({...e,showDay:null}))},[x,r]);let handleSelectDate=(e,a)=>{u(e=>({...e,showDay:a||0})),w(e)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.tq,{spaceBetween:8,slidesPerView:"auto",onSwiper:v,className:"px-5",modules:[o.W_],navigation:{nextEl:".button-next",prevEl:".button-prev"},style:{height:"62px"},children:[b&&b.map((e,a)=>(0,i.jsx)(m.o5,{className:"w-16 ".concat(e.id==j?"is-active":""),onClick:()=>handleSelectDate(e.id,e.original),children:(0,i.jsxs)("div",{className:"jsx-946ac3e01ac3c487 "+"w-16 cursor-pointer  overflow-hidden rounded  border bg-white   py-0 text-center transition-all  ".concat(e.id==j?"border-pink-700":"border-gray-300 hover:border-gray-400 "),children:[(0,i.jsx)("div",{className:"jsx-946ac3e01ac3c487 "+"mx-auto justify-center py-1 text-lg  font-semibold  ".concat(e.id==j?"bg-pink-600 text-white":"bg-gray-100 "),children:e.date}),(0,i.jsx)("div",{className:"jsx-946ac3e01ac3c487 "+"text-nowrap flex  h-6 items-center justify-center text-xs ".concat(e.id==j?"text-pink-600":"text-gray-400 "),children:(0,i.jsx)(DayConvert,{day:e.day,date:e.original})})]})},e.id)),(0,i.jsx)("div",{className:"jsx-946ac3e01ac3c487 button-next button-swiper absolute right-0 top-0 z-10 flex h-full w-12 cursor-pointer items-center justify-end pr-1 text-gray-500 ",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-946ac3e01ac3c487 h-6 w-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-946ac3e01ac3c487"})})}),(0,i.jsx)("div",{className:"jsx-946ac3e01ac3c487 button-prev button-swiper absolute left-0 top-0 z-10 flex h-full w-12 cursor-pointer items-center pl-1 text-gray-500 ",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-946ac3e01ac3c487 h-6 w-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-946ac3e01ac3c487"})})})]}),(0,i.jsx)(n(),{id:"946ac3e01ac3c487",children:".button-next.jsx-946ac3e01ac3c487{background:-webkit-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:-moz-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:-o-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:linear-gradient(90deg,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%)}.button-prev.jsx-946ac3e01ac3c487{background:-webkit-linear-gradient(right,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:-moz-linear-gradient(right,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:-o-linear-gradient(right,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%);background:linear-gradient(-90deg,rgba(255,255,255,0)0,rgba(255,255,255,.9)30%,rgba(255,255,255,1)50%,#fff 100%)}.button-swiper.swiper-button-disabled.jsx-946ac3e01ac3c487{display:none}"})]})}},70359:function(e,a,t){t.d(a,{Z:function(){return cinema_MovieBookingTime}});var i=t(85893),r=t(67294),n=t(1785),l=t.n(n),s=t(43639),c=t(94185),d=t(11163),o=t(1983),m=t(94923),h=t(41020),g=t(85463),x=t.n(g),N=t(23052),u=t(81732);let LoaderModal=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.Z,{isOpen:!0,onDismiss:()=>{},clusterClassName:"!bg-transparent  !shadow-none modal-cluster-loading",className:"modal-loading !mt-0",isShowHeaderClose:!1,isFullMobile:!0,isModalFree:!0,children:(0,i.jsx)("div",{className:"jsx-cd1ed41c1011e5e flex h-full items-center justify-center",children:(0,i.jsx)(u.Z,{})})}),(0,i.jsx)(x(),{id:"cd1ed41c1011e5e",children:".modal-cluster-loading{-webkit-animation:fadeIn 200ms both!important;-moz-animation:fadeIn 200ms both!important;-o-animation:fadeIn 200ms both!important;animation:fadeIn 200ms both!important;max-height:unset}.modal-loading{z-index:9999!important}"})]});var Z=t(27710),b=t(19699),p=t(57749),f=t(96616),v=t(5506),j=t(404),w=t(15186),y=t(93390),k=t(10600),W=t(60219),C=t(68121),S=t(86010),T=t(48583),_=t(12396),D=t(89755),F=t.n(D),z=t(1049);let SelectNumberTicket=e=>{var a;let{isOpen:t,onDismiss:n,goNext:l,session:s,timeRange:c,ticketTypes:d,isLoading:o}=e,m=(0,T.Dv)(_.P),{selectedMovie:h,selectedCinema:g}=m,[x,u]=(0,r.useState)(""),[D,A]=(0,r.useState)(!1),P=(0,r.useRef)(void 0),[R,I]=(0,r.useState)({tickets:d.reduce((e,a)=>(e[a.cinemaAreaCode]=a,e),{}),totalPrice:0,totalSelectedSeats:0}),{ShowTime:O,ScreenNumber:M}=s,{title:L,graphicUrl:B,apiRating:E}=h||{},{name:H,cineplexId:Q}=g||{};(0,r.useEffect)(()=>{if(x)return P.current=setTimeout(()=>{u("")},3e3),()=>{P.current&&clearTimeout(P.current)}},[x]);let _handleOnClickMinusIcon=e=>{var a;(null===(a=R.tickets[e.cinemaAreaCode])||void 0===a?void 0:a.numberTicket)!==0&&(D&&A(!1),I(a=>{var t;return{tickets:{...a.tickets,[e.cinemaAreaCode]:{...e,numberTicket:((null===(t=a.tickets[e.cinemaAreaCode])||void 0===t?void 0:t.numberTicket)||0)-1}},totalSelectedSeats:(0,p.DG)({cinemaAreaCode:e.cinemaAreaCode,cineplexId:Q})?a.totalSelectedSeats-2:a.totalSelectedSeats-1,totalPrice:a.totalPrice-e.price}}))},_handleOnClickPlusIcon=e=>{10===R.totalSelectedSeats&&A(!0);let a=R.totalSelectedSeats+((0,p.DG)({cinemaAreaCode:e.cinemaAreaCode,cineplexId:Q})?2:1),t=(0,p.b2)({cineplexId:Q});if(a>t){u("Qu\xfd kh\xe1ch chỉ c\xf3 thể chọn tối đa ".concat(t," v\xe9 1 lần."));return}I(t=>{var i;return{tickets:{...t.tickets,[e.cinemaAreaCode]:{...e,numberTicket:((null===(i=t.tickets[e.cinemaAreaCode])||void 0===i?void 0:i.numberTicket)||0)+1}},totalSelectedSeats:a,totalPrice:t.totalPrice+e.price}})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(N.Z,{isOpen:t,onDismiss:n,isShowHeaderClose:!1,cssSize:"md:max-w-md",className:"modal-number-ticket modal-to-offcanvas ",clusterClassName:"h-full md:h-auto  !md:rounded-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"relative flex shrink-0 items-center bg-pink-600 px-4 py-3",children:[(0,i.jsx)(C.Z,{className:"absolute left-3 h-6 shrink-0 cursor-pointer text-white transition-all hover:opacity-70",onClick:n}),(0,i.jsx)("b",{className:"grow text-center text-white",children:"Chọn số lượng v\xe9"})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"webkit-overflow-scroll flex-1 overflow-auto ",children:[(0,i.jsx)("div",{className:"z-1 relative",children:x&&(0,i.jsx)("div",{className:"absolute left-1/2 top-2 flex w-full -translate-x-1/2 items-center justify-center ",children:(0,i.jsxs)("div",{className:"fadeInDown sm:wit-fit z-50 mx-auto flex w-full items-center justify-between space-x-2 px-4 py-3 sm:rounded-md",style:{backgroundColor:"#FCE20B"},children:[(0,i.jsx)("span",{className:"text-sm sm:text-md",children:x}),(0,i.jsx)(v.Z,{className:"h-5 shrink-0 cursor-pointer transition-all hover:opacity-50",onClick:()=>{P.current&&clearTimeout(P.current),u("")}})]})})}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 p-4 shadow-md",children:[(0,i.jsx)("div",{className:"relative aspect-[2/3] h-fit w-20 shrink-0 overflow-x-hidden rounded-md",children:(0,i.jsx)(F(),{src:B||"/",layout:"fill",objectFit:"cover"})}),(0,i.jsxs)("ul",{className:"space-y-1",children:[(0,i.jsx)("li",{className:"origin-left scale-90",children:(0,i.jsx)(z.Z,{data:E,className:"!h-6 w-10 justify-center rounded-2xl"})}),(0,i.jsx)("li",{children:(0,i.jsx)("b",{children:L})}),(0,i.jsxs)("li",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,i.jsx)(j.Z,{className:"h-4"}),(0,i.jsx)("span",{children:H})]}),(0,i.jsxs)("li",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,i.jsx)(w.Z,{className:"h-4"}),(0,i.jsxs)("span",{children:[(0,b.p6)({date:new Date(O)})," -"," ",null==c?void 0:null===(a=c.split("~"))||void 0===a?void 0:a[0]]})]}),(0,i.jsxs)("li",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,i.jsx)(y.Z,{className:"h-4"}),(0,i.jsxs)("span",{children:["Ph\xf2ng chiếu: ",M]})]})]})]}),(0,i.jsx)("div",{className:"flex-grow select-none overflow-y-auto",children:d.map((e,a)=>{var t,r;return(0,i.jsx)("div",{className:"border-t border-gray-200",children:(0,i.jsxs)("div",{className:"flex justify-between space-x-4 px-4 py-5",children:[(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:"text-sm text-gray-500",children:e.desc}),(0,i.jsxs)("b",{children:[(0,f.h)(e.price),"đ"]})]}),(0,i.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,i.jsx)(k.Z,{className:(0,S.Z)("h-7","transition-all hover:opacity-80",(null===(t=R.tickets[e.cinemaAreaCode])||void 0===t?void 0:t.numberTicket)?"cursor-pointer text-pink-500":"pointer-events-none text-gray-400"),onClick:()=>{_handleOnClickMinusIcon(e)}}),(0,i.jsx)("span",{className:"flex h-7 w-7 items-center justify-center rounded-md border border-gray-300",children:(0,i.jsx)("b",{children:(null===(r=R.tickets[e.cinemaAreaCode])||void 0===r?void 0:r.numberTicket)||0})}),(0,i.jsx)(W.Z,{className:(0,S.Z)("h-7","transition-all hover:opacity-80",D?"pointer-events-none text-gray-400":"cursor-pointer text-pink-500"),onClick:()=>{_handleOnClickPlusIcon(e)}})]})]})},a)})})]}),(0,i.jsxs)("div",{className:"shrink-0 select-none border-t border-gray-200 px-4 pb-4",children:[(0,i.jsxs)("div",{className:"my-3 flex items-center justify-between space-x-3",children:[(0,i.jsx)("span",{className:"text-md lg:text-base",children:"Tổng cộng"}),(0,i.jsxs)("b",{className:"text-base lg:text-lg",children:[(0,f.h)(R.totalPrice),"đ"]})]}),(0,i.jsx)(Z.d,{className:"btn-primary mx-auto !block w-full text-sm md:w-fit md:text-base",onClick:()=>{if(0===R.totalSelectedSeats){u("Qu\xfd kh\xe1ch vui l\xf2ng chọn số lượng v\xe9 tối thiểu l\xe0 1.");return}l(R)},isLoading:o,children:"Tiếp tục"})]})]})]})})};var A=t(99501),P=t(19752),R=t(7647),I=t(19965),O=t(31955),M=t(26126),L=t(11374);let B={seats:{},totalPrice:0,totalSeats:0,cinemaAreaCodeCount:{}},SelectSeat=e=>{var a,t,n;let{isOpen:s,onDismiss:c,seatFood:d,timeRange:o,session:m,goNext:h,selectedTicketTypes:g,isFetchingQR:u}=e,j=(0,T.Dv)(_.P),{selectedMovie:w,selectedCinema:y}=j,[k,W]=(0,r.useState)(B),D=Object.values(k.seats||{}),E=g&&Object.values(g.tickets).reduce((e,a)=>{let{desc:t,numberTicket:i}=a;if(0===i)return e;let r=t.toLocaleLowerCase();return e.push("".concat(i," ").concat("ghế ti\xeau chuẩn"===r?"ghế thường":r)),e},[]).join(", "),[H,Q]=(0,r.useState)(1),[q,G]=(0,r.useState)(0),K=(0,r.useRef)(null),[V,X]=(0,r.useState)(!1),[Y,U]=(0,r.useState)(""),$=(0,r.useRef)(void 0),[J,ee]=(0,r.useState)(!1),{VersionType:ea,CaptionType:et,ShowTime:ei,ScreenNumber:er}=m,{title:en,apiRating:el}=w||{},{cineplexId:es,name:ec}=y||{},{SeatsInfo:ed,CineplexId:eo}=(null==d?void 0:null===(t=d.response)||void 0===t?void 0:null===(a=t.Data)||void 0===a?void 0:a[0])||{},em=(null==ed?void 0:ed.Config)||{},eh=(null==ed?void 0:ed.SeatTypes)||[],eg=(null==ed?void 0:null===(n=ed.Seats)||void 0===n?void 0:n.filter(e=>e.some(e=>{let{id:a}=e;return null!==a})))||[],handleSelectSeat=e=>{let a=e[0],t=e[1],{[a.seatKey]:i,[null==t?void 0:t.seatKey]:r,...n}=k.seats,l=k.totalSeats+(t?2:1)*(i?-1:1);if((null==em?void 0:em.OnlySelectSameTypeSeat)&&k.totalSeats>0&&D[0].cinemaAreaCode!==a.cinemaAreaCode){U("Bạn chỉ được chọn 1 loại ghế trong 1 lần đặt v\xe9. Vui l\xf2ng chọn lại loại ghế ph\xf9 hợp.");return}let s={};if(g){var c,d,o,m;if((null===(d=(s={...k.cinemaAreaCodeCount,[a.cinemaAreaCode]:{numberTicket:((null===(c=k.cinemaAreaCodeCount[a.cinemaAreaCode])||void 0===c?void 0:c.numberTicket)||0)+(i?-1:1)}})[a.cinemaAreaCode])||void 0===d?void 0:d.numberTicket)>(null===(m=g.tickets)||void 0===m?void 0:null===(o=m[a.cinemaAreaCode])||void 0===o?void 0:o.numberTicket)){U("Qu\xfd kh\xe1ch vui l\xf2ng chọn đủ ".concat(E,"."));return}}let h=(0,p.b2)({cineplexId:es});if(!(null==g?void 0:g.tickets)&&l>h){U("Qu\xfd kh\xe1ch chỉ c\xf3 thể chọn tối đa ".concat(h," ghế 1 lần."));return}W(e=>({seats:i?n:{...e.seats,[a.seatKey]:a,...t&&{[t.seatKey]:t}},totalPrice:e.totalPrice+(a.price+((null==t?void 0:t.price)||0))*(i?-1:1),totalSeats:l,cinemaAreaCodeCount:s}))};return(0,r.useEffect)(()=>{if(Y)return $.current=setTimeout(()=>{U("")},5e3),()=>{$.current&&clearTimeout($.current)}},[Y]),(0,r.useEffect)(()=>{var e;q&&(null==K||null===(e=K.current)||void 0===e||e.setTransform(-q,0,1,0,void 0))},[q]),(0,r.useEffect)(()=>{em.ShowMessage&&!O.Z.get("cinema-seat-regulation-".concat(eo))&&(X(!0),O.Z.set("cinema-seat-regulation-".concat(eo),"true",{expires:7}))},[d]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.Z,{isOpen:s,onDismiss:c,isShowHeaderClose:!1,isBig:!0,className:(0,S.Z)("modal-to-offcanvas md:p-4 ",m.ApiFilmId&&"film-".concat(null==m?void 0:m.ApiFilmId)),clusterClassName:"!h-full  !md:rounded-md overflow-hidden",children:(0,i.jsxs)("div",{className:" flex h-full flex-col  bg-black ",children:[(0,i.jsxs)("div",{className:"relative flex shrink-0 items-center bg-pink-600 px-4 py-3",children:[(0,i.jsx)(C.Z,{className:"absolute left-3 h-6 shrink-0 cursor-pointer text-white transition-all hover:opacity-70",onClick:c}),(0,i.jsx)("b",{className:"grow text-center text-white",children:"Mua v\xe9 xem phim"})]}),Y&&(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsxs)("div",{className:"fadeInDown sm:wit-fit fixed top-14 z-50 mx-auto flex w-full items-center justify-between space-x-2 px-4 py-3 sm:max-w-sm sm:rounded-md",style:{backgroundColor:"#FCE20B"},children:[(0,i.jsx)("span",{className:"text-sm sm:text-md",children:Y}),(0,i.jsx)(v.Z,{className:"h-5 shrink-0 cursor-pointer transition-all hover:opacity-50",onClick:()=>{$.current&&clearTimeout($.current),U("")}})]})}),(0,i.jsx)("div",{className:" flex-1  overflow-hidden ",children:(0,i.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-gray-800 pb-3",children:[(()=>{let e=eg.length,a=(null==ed?void 0:ed.TotalCol)||0,t=Math.floor(a/3),r=Math.floor(e/3),n=a-2*t,l=e-2*r,s=a*r+t+1,c=eh.reduce((e,a)=>{let{Type:t,Color:i}=a;return{...e,[t]:i}},{}),d=0;return(0,i.jsxs)("div",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" flex h-full overflow-hidden bg-gray-800 text-sm text-white",children:[(0,i.jsx)(M.d$,{doubleClick:{disabled:!0},zoomAnimation:{disabled:!0},centerZoomedOut:!1,initialPositionX:0,initialPositionY:0,maxPositionY:1,minScale:H,maxScale:1.75,ref:K,onInit:e=>{let{instance:{wrapperComponent:a,contentComponent:t}}=e;Q(Math.min(a.clientWidth/t.scrollWidth,a.clientHeight/t.scrollHeight)),G((t.scrollWidth-a.clientWidth)/2)},children:(0,i.jsx)(M.Uv,{wrapperStyle:{maxWidth:"100%",height:"100%",maxHeight:"100%",margin:"auto"},wrapperClass:"lg:cursor-grab",contentStyle:{padding:"0 16px"},children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" mb-3 w-full basis-full  px-20 pt-3 text-center text-white lg:mb-6 lg:px-40",children:[(0,i.jsx)("div",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" mx-auto mb-1 h-1 w-64 rounded-lg bg-white"}),(0,i.jsx)("span",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" text-xs lg:text-sm",children:"M\xc0N H\xccNH"})]}),(0,i.jsx)("div",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" cinema-seat-chart mx-auto",children:eg.map((e,a)=>{let t=!e.some(e=>{let{id:a}=e;return null!==a});if(t)return null;let r=!1;return(0,i.jsx)("div",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" cinema-seat-row",children:e.map((a,t)=>{var o;let{id:m,momoId:h,momoColIndex:g,momoRowIndex:N,nameRow:u,status:Z,cinemaAreaCode:b}=a,f="".concat(u).concat(h||m),v="".concat(N,"--").concat(g),j=(0,p.DG)({cinemaAreaCode:b,cineplexId:es}),w=j&&(0,p.DG)({cinemaAreaCode:null===(o=e[t-1])||void 0===o?void 0:o.cinemaAreaCode,cineplexId:es})&&!r;r=!!w;let y=j?w?e[t-1]:e[t+1]:void 0,W=y?"".concat(y.nameRow).concat(y[h?"momoId":"id"]):void 0,C=[{...a,seatKey:v,seatName:f}];if(y&&C.push({...y,seatKey:"".concat(y.momoRowIndex,"--").concat(y.momoColIndex),seatName:W}),!j||!w)return j?d+=2:d+=1,(0,i.jsxs)("button",{style:{backgroundColor:c[b]},onClick:()=>{handleSelectSeat(C)},className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" "+((0,S.Z)("cinema-seat-item",j&&"cinema-seat-item-couple",k.seats[v]&&"!border-white !bg-pink-600 !opacity-100",1===Z&&"!pointer-events-none !bg-gray-700",d===s&&"relative",!m&&"!pointer-events-none !bg-transparent",(f.includes("null")||(null==W?void 0:W.includes("null")))&&"!pointer-events-none !invisible")||""),children:[(0,i.jsxs)("span",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]]),children:[" ",m&&f]}),W!==f&&(0,i.jsx)("span",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]]),children:W}),d===s&&(0,i.jsx)("span",{className:x().dynamic([["5ed34611be80a526",[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin]]])+" cinema-center-area"})]},t)})},a)})})]})})}),(0,i.jsx)(x(),{id:"5ed34611be80a526",dynamic:[p.NZ.small.margin,p.NZ.small.margin,p.NZ.small.margin,p.NZ.borderWidth,n,p.NZ.small.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.borderWidth,p.NZ.small.margin,p.NZ.small.width,p.NZ.small.width,p.NZ.borderWidth,p.NZ.small.width,p.NZ.small.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.large.margin,p.NZ.borderWidth,n,p.NZ.large.margin,p.NZ.borderWidth,l,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.borderWidth,p.NZ.large.margin,p.NZ.large.width,p.NZ.large.width,p.NZ.large.width,p.NZ.large.margin],children:".cinema-seat-chart.__jsx-style-dynamic-selector>.__jsx-style-dynamic-selector:not([hidden])~.__jsx-style-dynamic-selector:not([hidden]){margin-top:".concat(p.NZ.small.margin,"}.cinema-seat-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.cinema-seat-row.__jsx-style-dynamic-selector>.__jsx-style-dynamic-selector:not([hidden])~.__jsx-style-dynamic-selector:not([hidden]){margin-left:").concat(p.NZ.small.margin,"}.cinema-center-area.__jsx-style-dynamic-selector{width:-webkit-calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(n," + 1px\n              );width:-moz-calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(n," + 1px\n              );width:calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(n," + 1px\n              );height:-webkit-calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(l," + 1px\n              );height:-moz-calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(l," + 1px\n              );height:calc(\n                (\n                    100% + ").concat(p.NZ.small.margin," + ").concat(p.NZ.borderWidth," *\n                      2\n                  ) * ").concat(l," + 1px\n              );top:-webkit-calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );top:-moz-calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );top:calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );left:-webkit-calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );left:-moz-calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );left:calc(\n                -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.small.margin," / 2 +\n                      0.5px)\n              );pointer-events:none;position:absolute;display:block;-webkit-border-radius:.375rem;-moz-border-radius:.375rem;border-radius:.375rem;border:1px solid rgb(110 231 183)}.cinema-seat-item.__jsx-style-dynamic-selector{width:").concat(p.NZ.small.width,";height:").concat(p.NZ.small.width,";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;cursor:pointer;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:.375rem;-moz-border-radius:.375rem;border-radius:.375rem;border:").concat(p.NZ.borderWidth," solid transparent;-webkit-transition:all.2s ease-in-out;-moz-transition:all.2s ease-in-out;-o-transition:all.2s ease-in-out;transition:all.2s ease-in-out;font-size:.625rem;-webkit-tap-highlight-color:transparent}.cinema-seat-item.__jsx-style-dynamic-selector:hover{opacity:1}.cinema-seat-item-couple.__jsx-style-dynamic-selector{width:-webkit-calc(\n                ").concat(p.NZ.small.width," * 2 + ").concat(p.NZ.small.margin,"\n              );width:-moz-calc(\n                ").concat(p.NZ.small.width," * 2 + ").concat(p.NZ.small.margin,"\n              );width:calc(\n                ").concat(p.NZ.small.width," * 2 + ").concat(p.NZ.small.margin,"\n              );-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;-webkit-border-radius:1rem;-moz-border-radius:1rem;border-radius:1rem}@media screen and (min-width:1024px){.cinema-seat-chart.__jsx-style-dynamic-selector>.__jsx-style-dynamic-selector:not([hidden])~.__jsx-style-dynamic-selector:not([hidden]){margin-top:").concat(p.NZ.large.margin,"}.cinema-seat-row.__jsx-style-dynamic-selector>.__jsx-style-dynamic-selector:not([hidden])~.__jsx-style-dynamic-selector:not([hidden]){margin-left:").concat(p.NZ.large.margin,"}.cinema-center-area.__jsx-style-dynamic-selector{width:-webkit-calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(n," + 1px\n                );width:-moz-calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(n," + 1px\n                );width:calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(n," + 1px\n                );height:-webkit-calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(l," + 1px\n                );height:-moz-calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(l," + 1px\n                );height:calc(\n                  (\n                      100% + ").concat(p.NZ.large.margin," +\n                        ").concat(p.NZ.borderWidth," * 2\n                    ) * ").concat(l," + 1px\n                );top:-webkit-calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                );top:-moz-calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                );top:calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                );left:-webkit-calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                );left:-moz-calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                );left:calc(\n                  -1 * (").concat(p.NZ.borderWidth," + ").concat(p.NZ.large.margin," / 2 +\n                        0.5px)\n                )}.cinema-seat-item.__jsx-style-dynamic-selector{width:").concat(p.NZ.large.width,";height:").concat(p.NZ.large.width,";font-size:.875rem;line-height:1.25rem}.cinema-seat-item.__jsx-style-dynamic-selector:hover{opacity:.7}.cinema-seat-item-couple.__jsx-style-dynamic-selector{width:-webkit-calc(\n                  ").concat(p.NZ.large.width," * 2 + ").concat(p.NZ.large.margin,"\n                );width:-moz-calc(\n                  ").concat(p.NZ.large.width," * 2 + ").concat(p.NZ.large.margin,"\n                );width:calc(\n                  ").concat(p.NZ.large.width," * 2 + ").concat(p.NZ.large.margin,"\n                )}}")})]})})(),(0,i.jsxs)("div",{className:"mt-3 w-full  px-4 text-xs text-white ",children:[(0,i.jsxs)("div",{className:"mx-auto grid w-fit grid-cols-3 gap-x-2 gap-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,i.jsx)("div",{className:"h-4 w-4 shrink-0 rounded-sm bg-gray-700 "}),(0,i.jsx)("span",{children:"Đ\xe3 đặt"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,i.jsx)("div",{className:"h-4 w-4 shrink-0 rounded-sm border border-white bg-pink-600"}),(0,i.jsx)("span",{children:"Ghế bạn chọn"})]}),eh.map((e,a)=>{let{Color:t,Name:r}=e;return(0,i.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,i.jsx)("div",{className:"h-4 w-4 shrink-0 rounded-sm",style:{backgroundColor:t}}),(0,i.jsx)("span",{className:"break-all",children:r})]},a)}),(0,i.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,i.jsx)("div",{className:"h-4 w-4 shrink-0 rounded-sm border border-green-300"}),(0,i.jsx)("span",{children:"V\xf9ng trung t\xe2m"})]})]}),(0,i.jsxs)("span",{className:"mt-2 block cursor-pointer text-center transition-all hover:opacity-70 ",onClick:()=>ee(!0),children:[(0,i.jsx)("b",{children:(0,i.jsx)("u",{children:"Xem chi tiết"})})," ","h\xecnh ảnh v\xe0 th\xf4ng tin ghế"]})]})]})}),(0,i.jsx)("div",{className:" shrink-0",children:(0,i.jsxs)("div",{className:"rounded-t-xl bg-white px-4 py-4 sm:rounded-t-none ",children:[(0,i.jsxs)("div",{className:" grid grid-cols-1 divide-y divide-gray-200   text-sm",children:[(0,i.jsxs)("div",{className:"pb-2",children:[(0,i.jsxs)("div",{className:"flex space-x-2  pb-1 ",children:[(0,i.jsx)("div",{className:"h-fit shrink-0 scale-90",children:(0,i.jsx)(z.Z,{data:el,className:"!h-6 w-10 justify-center rounded-2xl"})}),(0,i.jsx)("div",{children:(0,i.jsx)("b",{className:"line-clamp-1 text-base md:line-clamp-none ",children:en})})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("span",{className:"block text-tiny text-orange-500 lg:text-sm",children:[(ea||et)&&(0,i.jsxs)(i.Fragment,{children:[" ",o]}),(0,i.jsxs)(i.Fragment,{children:[" ","\xb7"," ",(0,b.p6)({date:new Date(ei),isWithDayName:!0,type:b.DC.onlyDayMonth})]}),er?" \xb7 Ph\xf2ng chiếu ".concat(er):"",(ea||et)&&(0,i.jsxs)(i.Fragment,{children:[" ","\xb7"," ",(0,i.jsx)(L.Z,{versionType:ea,captionType:et})]})]})})]}),(0,i.jsxs)("div",{className:"flex  items-center justify-between space-x-3 py-1.5",children:[(0,i.jsx)("span",{className:"shrink-0 text-gray-500",children:"Chỗ ngồi"}),(0,i.jsxs)("div",{className:(0,S.Z)("flex items-center space-x-2 rounded-lg border border-gray-200 px-3 py-1",0===k.totalSeats&&"invisible opacity-0"),children:[(0,i.jsx)("span",{children:(0,p.Nc)(D).join(", ")}),(0,i.jsx)(I.Z,{fill:"rgb(239 68 68)",className:"h-6 shrink-0 cursor-pointer text-white transition-all hover:opacity-70",onClick:()=>W(B)})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center border-t border-gray-200 pt-3",children:[(0,i.jsxs)("div",{className:" flex-1",children:[(0,i.jsx)("span",{className:"block text-sm text-gray-500 ",children:"Tạm t\xednh"}),(0,i.jsxs)("b",{className:(0,S.Z)("text-lg",0===k.totalSeats&&"d"),children:[(0,f.h)(k.totalPrice),"đ"]})]}),(0,i.jsx)("div",{className:" shrink-0",children:(0,i.jsx)(Z.d,{isLoading:u,className:"btn-primary tracking-engage-btn-cineseat  h-12  w-full  !px-8 !text-md hover:bg-pink-500",onClick:()=>{if(g){let e=Object.keys(g.tickets).some(e=>{var a,t;return((null===(a=k.cinemaAreaCodeCount[e])||void 0===a?void 0:a.numberTicket)||0)!==(null===(t=g.tickets)||void 0===t?void 0:t[e].numberTicket)});if(e){U("Qu\xfd kh\xe1ch vui l\xf2ng chọn đủ ".concat(E,"."));return}}if(0===k.totalSeats){U("Qu\xfd kh\xe1ch vui l\xf2ng chọn \xedt nhất 1 ghế.");return}let e=(0,p.sV)({seatMatrix:(null==ed?void 0:ed.Seats)||[],selectedSeats:k});if(e){U(e);return}h(k),l().dataLayer({dataLayer:{event:"popup.cinema.seat-popcorn","Cinema.Name":ec,"Cinema.ShowTime":o,"Cinema.FilmName":en}})},children:"Mua v\xe9"})})]})]})})]})}),(0,i.jsxs)(N.Z,{isOpen:J,onDismiss:()=>ee(!1),clusterClassName:"overflow-x-hidden",className:"modal-cinema-seat-detail",cssSize:"!max-w-lg",children:[(0,i.jsx)(R.Z,{className:"bg-gray-100",isBorder:!1,children:(0,i.jsx)("b",{children:"Chi tiết loại ghế"})}),(0,i.jsx)(A.Z,{className:"p-0",children:(0,i.jsx)("div",{className:"space-y-5 p-5 text-sm lg:text-base",children:eh.map((e,a)=>{let{Avatar:t,Description:r,Name:n}=e;return(0,i.jsxs)("div",{className:"overflow-x-hidden rounded-lg shadow-xl",children:[(0,i.jsx)("div",{className:"relative aspect-2",children:(0,i.jsx)(F(),{src:t||"/",layout:"fill",objectFit:"cover"})}),(0,i.jsxs)("ul",{className:"px-4 py-3",children:[(0,i.jsx)("li",{children:(0,i.jsx)("b",{children:n})}),(0,i.jsx)("li",{dangerouslySetInnerHTML:{__html:r}})]})]},a)})})})]}),(0,i.jsxs)(N.Z,{isOpen:V,onDismiss:()=>X(!1),clusterClassName:"overflow-x-hidden",cssSize:"lg:max-w-sm",className:"modal-cineplex-regulation",children:[(0,i.jsx)(R.Z,{className:"bg-gray-100",isBorder:!1,children:em.Title}),(0,i.jsx)(A.Z,{className:"px-5 py-4",children:(0,i.jsx)("div",{className:"text-sm sm:text-base",dangerouslySetInnerHTML:{__html:em.Content||""}})}),(0,i.jsx)(P.Z,{children:(0,i.jsx)("button",{className:"btn-primary text-sm md:text-base",onClick:()=>X(!1),children:"Đ\xe3 hiểu"})})]})]})};var E=t(78561);let H={seatsRef:{},ticketTypesRef:void 0,foodRef:void 0};function movieTimeConvertZero(e){if(!e)return"";let[a,t]=e.split(":"),i="";return i=1==a.length?i.concat("0".concat(a,":")):i.concat("".concat(a,":")),i=1==t.length?i.concat("0".concat(t)):i.concat("".concat(t))}var cinema_MovieBookingTime=e=>{var a,t,n,g,x;let{cinema:N,session:u,movie:Z,onClick:b}=e,p=(0,d.useRouter)(),[f,v]=(0,r.useState)({numberTicket:!1,seat:!1,food:!1,qrCode:!1}),[j,w]=(0,r.useState)({loading:!1,error:!1,response:void 0}),[y,k]=(0,r.useState)({loading:!1,response:void 0}),W=(0,r.useRef)(null),[C,S]=[(0,r.useRef)(H),e=>{C.current={...C.current,...e}}],[T,_]=(null==u?void 0:null===(a=u.ShowTimeDuration)||void 0===a?void 0:a.split(" ~ "))||[],D=movieTimeConvertZero(T),F=movieTimeConvertZero(_),z="".concat(D,"  ").concat(F&&"~","  ").concat(F),{Concessions:A,SeatsInfo:P,UserSessionId:R}=(null==j?void 0:null===(n=j.response)||void 0===n?void 0:null===(t=n.Data)||void 0===t?void 0:t[0])||{},{ApiCinemaId:I,ApiFilmId:O,CityId:M,ShowDateTime:L,Cineplex:B,SessionId:Q,ScreenNumber:q,ScreenName:G,ShowTimeLink:K,ShowTimeDuration:V,ScreenSpecialType:X}=u||{},{name:Y,isOrderLink:U}=N||{},{title:$}=Z||{},handleFetchSeats=async()=>{var e,a;let{ticketTypesRef:t}=C.current;w(e=>({...e,loading:!0}));let i=await E.Z.post("/cinema/ci-cinema/seat",{apiCinemaId:I,cineplex:B,sessionId:Q,screenNumber:q,screenName:G,showDateTime:L,ticketTypes:(null==t?void 0:t.tickets)?Object.values(t.tickets):void 0},{timeout:15e3}),{SeatsInfo:r,TicketTypes:n}=(null==i?void 0:null===(e=i.Data)||void 0===e?void 0:e[0])||{};if(!(null==i?void 0:i.Data)||r&&(null==r?void 0:null===(a=r.Seats)||void 0===a?void 0:a.length)===0){w(e=>({...e,error:!0,loading:!1})),(0,h.B)();return}w(e=>({...e,error:!1,loading:!1,response:i})),r?v(e=>({...e,seat:!0})):(W.current=n,v(e=>({...e,numberTicket:!0})))},handleFetchBookingQR=async()=>{let{foodRef:e,seatsRef:a,ticketTypesRef:t}=C.current;k(e=>({...e,loading:!0}));try{var i,r,n;let s=await E.Z.post("/cinema/ci-film/v1.1/deepLink",{apiFilmId:O,apiCinemaId:I,cineplex:B,showDateTime:L,sessionId:Q,cityId:M,seatList:Object.values(a.seats),concessions:Object.values((null==e?void 0:e.food)||{}),ticketTypes:Object.values((null==t?void 0:t.tickets)||{}),totalPrice:((null==e?void 0:e.totalPrice)||0)+a.totalPrice,userSessionId:R,screenSpecialType:X,trackingParams:{...null===(r=(0,o.Pt)(m.yA))||void 0===r?void 0:null===(i=r[m.wq["/cinema"]])||void 0===i?void 0:i.data},allConcessions:A},{timeout:5e3});if(k(e=>({...e,loading:!1,response:s})),!(null===(n=s.Data)||void 0===n?void 0:n[0])){k(e=>({...e,loading:!1})),(0,h.B)();return}v(e=>({...e,qrCode:!0})),l().dataLayer({dataLayer:{event:"popup.cinema.seat-popcorn","Cinema.Name":Y,"Cinema.ShowTime":z,"Cinema.FilmName":$}})}catch(e){k(e=>({...e,loading:!1})),(0,h.B)()}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"tracking-engage-btn-showtime text-tiny group cursor-pointer whitespace-nowrap rounded-md border border-sky-400 bg-sky-100/5 px-2 py-1 text-center text-sky-600 hover:bg-white hover:text-sky-500",onClick:()=>{l().dataLayer({dataLayer:{event:"popup.cinema.seat-popcorn","Cinema.Name":Y,"Cinema.ShowTime":V,"Cinema.FilmName":$}}),U?p.push(K):handleFetchSeats(),null==b||b()},children:[(0,i.jsx)("strong",{className:"text-md font-semibold ",children:D})," ",F&&"~"," ",F]}),f.numberTicket&&(0,i.jsx)(SelectNumberTicket,{isOpen:f.numberTicket,onDismiss:()=>{v(e=>({...e,numberTicket:!1}))},isLoading:j.loading,session:u,timeRange:z,ticketTypes:W.current||[],goNext:e=>{S({ticketTypesRef:e}),handleFetchSeats()}}),f.seat&&(0,i.jsx)(SelectSeat,{isOpen:f.seat,onDismiss:()=>{S(H),v(e=>({...e,seat:!1}))},isFetchingQR:(null==A?void 0:A.length)===0&&y.loading,session:u,seatFood:j,selectedTicketTypes:C.current.ticketTypesRef,timeRange:z,goNext:e=>{var a;if(S({seatsRef:e}),!(null==P?void 0:null===(a=P.Config)||void 0===a?void 0:a.CanSelectFood)||(null==A?void 0:A.length)===0){handleFetchBookingQR();return}v(e=>({...e,food:!0}))}}),f.food&&(0,i.jsx)(s.Q,{isOpen:f.food,onDismiss:()=>{v(e=>({...e,food:!1}))},isFetchingQR:y.loading,food:A||[],defaultSelectedFood:C.current.foodRef,onChange:e=>{S({foodRef:e})},goNext:handleFetchBookingQR}),f.qrCode&&(0,i.jsx)(c.e,{isOpen:f.qrCode,onDismiss:()=>{v(e=>({...e,qrCode:!1}))},session:u,timeRange:z,qrLink:null===(x=y.response)||void 0===x?void 0:null===(g=x.Data)||void 0===g?void 0:g[0],selectedSeats:C.current.seatsRef,selectedFood:C.current.foodRef}),j.loading&&!C.current.ticketTypesRef&&(0,i.jsx)(LoaderModal,{})]})}},25284:function(e,a,t){var i=t(85893),r=t(85463),n=t.n(r),l=t(5152),s=t.n(l),c=t(67294),d=t(23052),o=t(99501),m=t(7647),h=t(19752);let g=s()(()=>Promise.all([t.e(2634),t.e(8263)]).then(t.bind(t,38263)),{loadableGenerated:{webpack:()=>[38263]}});a.Z=function(e){let{children:a,lat:t,lon:r,address:l,name:s}=e;if(!t||!r)return(0,i.jsx)(i.Fragment,{});let[x,N]=(0,c.useState)(!1),close=()=>{N(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("a",{onClick:()=>N(!0),className:"jsx-ed65a84edc56f4ec inline-block  text-blue-500 whitespace-nowrap relative z-10 hover:text-blue-700 cursor-pointer btn-gg",children:a}),(0,i.jsxs)(d.Z,{isOpen:x,onDismiss:close,isFull:!0,children:[(0,i.jsx)(m.Z,{children:" Bản đồ "}),(0,i.jsx)(o.Z,{className:"p-0 bg-white rounded gg-map",children:(0,i.jsxs)("div",{className:"jsx-ed65a84edc56f4ec flex h-full w-full relative",children:[(0,i.jsx)(g,{lat:t,lon:r,address:l,name:s}),(0,i.jsxs)("div",{className:"jsx-ed65a84edc56f4ec flex space-x-2 absolute bottom-2 right-2 z-10",children:["undefined"!=typeof navigator&&navigator.userAgent.includes("Mac")&&(0,i.jsxs)("a",{target:"_blank",href:" http://maps.apple.com/?destination=".concat(t,",").concat(r),className:"jsx-ed65a84edc56f4ec shadow flex flex-nowrap items-center px-3 py-1 text-sm text-center  transition-all bg-blue-50 rounded-md cursor-pointer btn text-opacity-60 hover:bg-blue-100 ",children:[(0,i.jsx)("img",{src:"https://homepage.momocdn.net/next-js/_next/static/public/cinema/apple-map-icon.svg",className:"jsx-ed65a84edc56f4ec w-6 mr-2"})," ",(0,i.jsxs)("div",{className:"jsx-ed65a84edc56f4ec text-gray-500 text-left leading-4",children:[(0,i.jsx)("div",{className:"jsx-ed65a84edc56f4ec text-xs ",children:"T\xecm đường bằng"})," ",(0,i.jsx)("div",{className:"jsx-ed65a84edc56f4ec text-gray-900",children:" Apple Map"})]})]}),(0,i.jsxs)("a",{target:"_blank",href:"https://www.google.com/maps/dir/?api=1&destination=".concat(t,",").concat(r),className:"jsx-ed65a84edc56f4ec shadow flex flex-nowrap items-center px-3 py-1 text-sm  text-center  transition-all bg-blue-50 rounded-md cursor-pointer btn text-opacity-60 hover:bg-blue-100  ",children:[(0,i.jsx)("img",{src:"https://homepage.momocdn.net/next-js/_next/static/public/cinema/google-map-icon.svg",className:"jsx-ed65a84edc56f4ec w-6 mr-2"}),(0,i.jsxs)("div",{className:"jsx-ed65a84edc56f4ec text-gray-500 text-left leading-4",children:[(0,i.jsx)("div",{className:"jsx-ed65a84edc56f4ec text-xs ",children:"T\xecm đường bằng"})," ",(0,i.jsx)("div",{className:"jsx-ed65a84edc56f4ec text-gray-900",children:"Google Map"})]})]})]})]})}),(0,i.jsx)(h.Z,{className:"flex",children:(0,i.jsx)("div",{className:"jsx-ed65a84edc56f4ec flex",children:(0,i.jsx)("a",{onClick:close,className:"jsx-ed65a84edc56f4ec flex items-center px-5 py-2 text-sm font-bold text-center text-white uppercase transition-all bg-pink-700 rounded-md cursor-pointer btn text-opacity-90 hover:bg-pink-800",children:"Đ\xf3ng"})})})]}),(0,i.jsx)(n(),{id:"ed65a84edc56f4ec",children:".mapboxgl-popup{top:-40px}.mapboxgl-popup-close-button{padding:4px 8px}.map-container{height:100%;width:100%}"})]})}}}]);